{
  "name": "wendy-vscode",
  "displayName": "Wendy",
  "description": "Build and debug WendyOS applications with Visual Studio Code",
  "version": "0.0.12",
  "publisher": "wendylabsinc",
  "repository": {
    "type": "git",
    "url": "https://github.com/wendylabsinc/wendy-vscode"
  },
  "icon": "resources/icon.png",
  "engines": {
    "vscode": "^1.96.0"
  },
  "categories": [
    "Debuggers"
  ],
  "activationEvents": [
    "workspaceContains:Package.swift",
    "workspaceContains:**/*.py",
    "onDebug",
    "onDebugDynamicConfigurations:wendy",
    "onDebugResolve:wendy"
  ],
  "main": "./dist/extension.js",
  "extensionDependencies": [
    "swiftlang.swift-vscode",
    "ms-python.debugpy"
  ],
  "contributes": {
    "jsonValidation": [
      {
        "fileMatch": "wendy.json",
        "url": "./schemas/wendy-schema.json"
      }
    ],
    "viewsContainers": {
      "activitybar": [
        {
          "id": "wendy-explorer",
          "title": "Wendy",
          "icon": "resources/activity_bar_icon_dark.png",
          "iconTheme": {
            "light": "resources/activity_bar_icon_light.png",
            "dark": "resources/activity_bar_icon_dark.png"
          }
        }
      ]
    },
    "views": {
      "wendy-explorer": [
        {
          "id": "wendyDevices",
          "name": "Devices"
        },
        {
          "id": "wendyDisks",
          "name": "Disks"
        },
        {
          "id": "wendyOperatingSystemCache",
          "name": "Operating System Cache"
        },
        {
          "id": "wendyDocumentation",
          "name": "Documentation"
        }
      ]
    },
    "commands": [
      {
        "command": "wendyDevices.addDevice",
        "title": "Add Device",
        "icon": "$(add)"
      },
      {
        "command": "wendyDevices.refreshDevices",
        "title": "Refresh Devices",
        "icon": "$(refresh)"
      },
      {
        "command": "wendyDevices.deleteDevice",
        "title": "Remove Device",
        "icon": "$(trash)"
      },
      {
        "command": "wendyDevices.connectWifi",
        "title": "Connect to WiFi",
        "icon": "$(link)"
      },
      {
        "command": "wendyDevices.updateAgent",
        "title": "Update Agent",
        "icon": "$(sync)"
      },
      {
        "command": "wendyDevices.showInfo",
        "title": "More Info",
        "category": "Wendy"
      },
      {
        "command": "wendyDevices.copyHostname",
        "title": "Copy Hostname",
        "category": "Wendy"
      },
      {
        "command": "wendyDevices.copyAgentVersion",
        "title": "Copy Wendy Agent Version",
        "category": "Wendy"
      },
      {
        "command": "wendyDevices.selectDevice",
        "title": "Set as Current Device",
        "icon": "$(check)"
      },
      {
        "command": "wendyDisks.flashDisk",
        "title": "Flash Disk",
        "icon": "$(zap)"
      },
      {
        "command": "wendyDisks.refreshDisks",
        "title": "Refresh Disks",
        "icon": "$(refresh)"
      },
      {
        "command": "wendyOperatingSystemCache.openRootFinder",
        "title": "Reveal in Finder",
        "icon": "$(folder-opened)"
      },
      {
        "command": "wendyOperatingSystemCache.openRootExplorer",
        "title": "Reveal in Explorer",
        "icon": "$(folder-opened)"
      },
      {
        "command": "wendyOperatingSystemCache.openRootFileManager",
        "title": "Reveal Cache Folder",
        "icon": "$(folder-opened)"
      },
      {
        "command": "wendyOperatingSystemCache.revealFinder",
        "title": "Reveal in Finder"
      },
      {
        "command": "wendyOperatingSystemCache.revealExplorer",
        "title": "Reveal in Explorer"
      },
      {
        "command": "wendyOperatingSystemCache.revealFileManager",
        "title": "Reveal in File Manager"
      },
      {
        "command": "wendyOperatingSystemCache.deleteEntry",
        "title": "Delete"
      },
      {
        "command": "wendy.refreshDebugConfigurations",
        "title": "Refresh Debug Configurations",
        "category": "Wendy"
      },
      {
        "command": "wendy.configureSwiftSdkPath",
        "title": "Configure Swift SDK Path",
        "category": "Wendy"
      }
    ],
    "menus": {
      "view/title": [
        {
          "command": "wendyDevices.addDevice",
          "when": "view == wendyDevices",
          "group": "navigation"
        },
        {
          "command": "wendyDevices.refreshDevices",
          "when": "view == wendyDevices",
          "group": "navigation"
        },
        {
          "command": "wendyDisks.refreshDisks",
          "when": "view == wendyDisks",
          "group": "navigation"
        },
        {
          "command": "wendyOperatingSystemCache.openRootFinder",
          "when": "view == wendyOperatingSystemCache && isMac",
          "group": "navigation"
        },
        {
          "command": "wendyOperatingSystemCache.openRootExplorer",
          "when": "view == wendyOperatingSystemCache && isWindows",
          "group": "navigation"
        },
        {
          "command": "wendyOperatingSystemCache.openRootFileManager",
          "when": "view == wendyOperatingSystemCache && !isMac && !isWindows",
          "group": "navigation"
        }
      ],
      "view/item/context": [
        {
          "command": "wendyDevices.deleteDevice",
          "when": "view == wendyDevices && viewItem =~ /device/ && viewItem =~ /Custom/",
          "group": "inline"
        },
        {
          "command": "wendyDevices.updateAgent",
          "when": "view == wendyDevices && viewItem =~ /device/",
          "group": "navigation@0"
        },
        {
          "command": "wendyDevices.showInfo",
          "when": "view == wendyDevices && viewItem =~ /device/ && viewItem =~ /LAN/",
          "group": "navigation@1"
        },
        {
          "command": "wendyDevices.copyHostname",
          "when": "view == wendyDevices && viewItem =~ /device/ && viewItem =~ /LAN/",
          "group": "navigation@2"
        },
        {
          "command": "wendyDevices.copyAgentVersion",
          "when": "view == wendyDevices && viewItem =~ /device/ && viewItem =~ /LAN/",
          "group": "navigation@3"
        },
        {
          "command": "wendyDevices.selectDevice",
          "when": "view == wendyDevices && viewItem =~ /device/ && !(viewItem =~ /current/)",
          "group": "inline"
        },
        {
          "command": "wendyDisks.flashDisk",
          "when": "view == wendyDisks && viewItem == disk",
          "group": "inline"
        },
        {
          "command": "wendyOperatingSystemCache.revealFinder",
          "when": "view == wendyOperatingSystemCache && viewItem =~ /operatingSystemCache/ && isMac",
          "group": "navigation"
        },
        {
          "command": "wendyOperatingSystemCache.revealExplorer",
          "when": "view == wendyOperatingSystemCache && viewItem =~ /operatingSystemCache/ && isWindows",
          "group": "navigation"
        },
        {
          "command": "wendyOperatingSystemCache.revealFileManager",
          "when": "view == wendyOperatingSystemCache && viewItem =~ /operatingSystemCache/ && !isMac && !isWindows",
          "group": "navigation"
        },
        {
          "command": "wendyOperatingSystemCache.deleteEntry",
          "when": "view == wendyOperatingSystemCache && viewItem =~ /operatingSystemCache/",
          "group": "navigation@2"
        }
      ]
    },
    "keybindings": [
      {
        "command": "wendyOperatingSystemCache.deleteEntry",
        "key": "delete",
        "mac": "backspace",
        "when": "view == wendyOperatingSystemCache && viewItem =~ /operatingSystemCache/"
      }
    ],
    "configuration": {
      "title": "WendyOS",
      "properties": {
        "wendyos.runtime": {
          "type": "string",
          "default": "containerd",
          "enum": [
            "containerd",
            "docker"
          ],
          "description": "The runtime to use when deploying to WendyOS. This can be either `containerd` or `docker`"
        },
        "wendyos.cliPath": {
          "type": "string",
          "default": "",
          "description": "Path to the Wendy CLI executable. Leave empty for automatic detection."
        },
        "wendyos.swiftSdkPath": {
          "type": "string",
          "default": "~/.swiftpm/swift-sdks/6.1-RELEASE_wendyos_aarch64.artifactbundle",
          "description": "Path to the WendyOS Swift SDK artifact bundle. Required for debugging. This setting will be removed once the Wendy CLI is capable of managing the SDK. This MUST point to the installation location of the 6.1-RELEASE_wendyos_aarch64 SDK."
        },
        "wendyos.devices": {
          "type": "array",
          "default": [],
          "description": "List of Wendy devices",
          "items": {
            "type": "object",
            "properties": {
              "id": {
                "type": "string",
                "description": "Unique identifier for the device"
              },
              "address": {
                "type": "string",
                "description": "Device address (hostname or hostname:port)"
              }
            }
          }
        },
        "wendyos.currentDevice": {
          "type": "string",
          "default": null,
          "description": "ID of the currently selected Wendy device"
        },
        "wendy.cache.root": {
          "type": "string",
          "default": "",
          "description": "Root directory that the Operating System Cache view displays. Leave empty to use the default cache path for your OS (`~/.wendy/cache` on macOS/Linux, `%LOCALAPPDATA%\\Wendy\\cache` on Windows). Supports `~` expansion."
        }
      }
    },
    "debuggers": [
      {
        "type": "wendy",
        "label": "WendyOS Debugger",
        "configurationAttributes": {
          "attach": {
            "required": [
              "target"
            ],
            "properties": {
              "target": {
                "type": "string",
                "description": "The target to debug."
              },
              "cwd": {
                "type": "string",
                "description": "The working directory for the debug session."
              },
              "agent": {
                "type": "string",
                "description": "The Wendy agent address (hostname:port) to connect to."
              },
              "preLaunchTask": {
                "type": "string",
                "description": "Task to run before starting the debug session."
              },
              "initCommands": {
                "type": "array",
                "description": "LLDB commands executed upon debugger startup prior to creating the LLDB target.",
                "items": {
                  "type": "string"
                }
              },
              "attachCommands": {
                "type": "array",
                "description": "LLDB commands that execute in place of the standard attach mechanism. Used for custom attach scenarios such as remote debugging.",
                "items": {
                  "type": "string"
                }
              },
              "preRunCommands": {
                "type": "array",
                "description": "LLDB commands executed just before attaching, after the LLDB target has been created.",
                "items": {
                  "type": "string"
                }
              },
              "stopCommands": {
                "type": "array",
                "description": "LLDB commands executed just after each stop.",
                "items": {
                  "type": "string"
                }
              },
              "gdb-remote-hostname": {
                "type": "string",
                "description": "Hostname for remote debugging with GDB protocol."
              },
              "gdb-remote-port": {
                "type": "integer",
                "description": "Port for remote debugging with GDB protocol."
              }
            }
          }
        },
        "initialConfigurations": [
          {
            "type": "wendy",
            "request": "attach",
            "name": "Debug Wendy Application",
            "target": "${workspaceFolderBasename}",
            "cwd": "${workspaceFolder}"
          }
        ]
      }
    ],
    "taskDefinitions": [
      {
        "type": "wendy",
        "required": [
          "args"
        ],
        "properties": {
          "args": {
            "description": "The arguments to pass to the Wendy CLI.",
            "type": "array",
            "items": {
              "type": "string"
            },
            "cwd": {
              "description": "The folder to run the task in.",
              "type": "string"
            }
          }
        }
      }
    ]
  },
  "scripts": {
    "vscode:prepublish": "npm run package",
    "compile": "npm run check-types && npm run lint && node esbuild.js",
    "watch": "npm-run-all -p watch:*",
    "watch:esbuild": "node esbuild.js --watch",
    "watch:tsc": "tsc --noEmit --watch --project tsconfig.json",
    "package": "npm run check-types && npm run lint && node esbuild.js --production",
    "compile-tests": "tsc -p . --outDir out",
    "watch-tests": "tsc -p . -w --outDir out",
    "pretest": "npm run compile-tests && npm run compile && npm run lint",
    "check-types": "tsc --noEmit",
    "lint": "eslint src",
    "test": "vscode-test",
    "publish:vscode": "bash ./scripts/publish.sh"
  },
  "devDependencies": {
    "@types/mocha": "^10.0.10",
    "@types/node": "20.x",
    "@types/uuid": "^9.0.8",
    "@typescript-eslint/eslint-plugin": "^8.28.0",
    "@typescript-eslint/parser": "^8.28.0",
    "eslint": "^9.23.0",
    "esbuild": "^0.25.1",
    "npm-run-all": "^4.1.5",
    "typescript": "^5.8.2",
    "@vscode/test-cli": "^0.0.10",
    "@vscode/test-electron": "^2.4.1",
    "@types/vscode": "^1.96.0",
    "uuid": "^11.0.1"
  }
}